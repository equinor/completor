---
title: Completor Usage
sidebar_position: 4
description: Step-by-step Completor Usage
---

# Completor® Configuration

Completor® reads two input files:

1. A schedule file containing the multi-segment well definition in terms of `WELSPECS`,
`WELSEGS`, `COMPSEGS`, and `COMPDAT`.
These keywords are produced from pre-processor tools such as RMS,
ResInsight, Petrel, etc. to define multi-segment well initial configuration.
2. A user defined text file, also called a case file,
specifying the completion design, including inflow control devices and annulus content.
The information in the input schedule file and the case file is combined
and written to a new schedule file to be included in Eclipse or OPM Flow.

Completor® is a Command-Line Interface (CLI), called by the following syntax:
```shell
completor -i <case_file> -s <schedule_file> -o <output_schedule_location> --figure --loglevel <number>
```

- **`completor`** Calls the program.
- **`-i <case_file>`** The filepath with name and extension to the case file. E.g. `some/folder/my_case_file.case`.
This is the only strictly required keyword.
- **`-s <schedule_file>`** The filepath with name and extension to the schedule file.
E.g. `some/folder/my_input.sch`.
This keyword is optional, as it's possible to set the path to schedule-file from the case-file.
But the file itself is not optional, thus it must be set in at least one place!
- **`-o <output_schedule_location>`** The filepath with name and extension to the schedule file.
E.g. `some/folder/advanced_schedule.sch`.
This keyword is optional, and if not set, will default the same name as input plus `advanced.wells`.
- **`--figure`** If present, generates simple diagrams of the well completion.
- **`--loglevel <number>`** Set the wanted log-level. Default is 30, aka `WARNING`.
- **`-h or --help`** To display simple help, similar to this.



The input schedule file is generated by some pre-processing tool like RMS, ResInsight, Petrel, etc.
Thus, the main focus lies on the configuration of the case file.
The following section provides guidance on how to set up the case file by a range of pre-defined keywords (in capital letters).

## Keywords

Completor has several keywords to cover variations of well completion and its setup on the simulation.
There are several keywords that can be set as `optional` while the one with `*` is mandatory to be set,
otherwise Completor will fail and exit.

### SCHFILE (optional)

The input schedule file to Completor® (describing the multi-segment tubing definition)
may be called directly from the command line or it may be specified by starting the case-file like this:
```shell
SCHFILE
-- Input schedule file at specified path.
  '../include/schedule/field.sch'
/
```

The keyword `SCHFILE` is mandatory if the `-s <schedule_file>` option is not specified in the command line.
Note that the input schedule file should NOT include any definitions related to inflow control for the wells to be modeled by Completor®.
This includes keywords such as `WSEGAICD`, `WSEGSICD`, and `WSEGVALV`.
Completor® will add these keywords.

### COMPLETION

The content of this keyword describes the completion configuration. The
COMPLETION keyword is mandatory and contains the following items:

1. **Well**: Well name (must be identical to the well name specified in the Eclipse schedule file).
2. **Branch number**: This is the same branch number as specified in the Eclipse schedule file.
   Multi branch wells are allowed.
3. **Start MD**: Completion start measured depth in meter.
   Note:** Set the first start MD to be shallower than the shallowest MD of the first COMPSEGS segment,
   to make sure the entire COMPSEGS interval is covered.
   If a single case file is used for all realizations in an ensemble,
   make sure the start MD is shallower than the shallowest MD of all COMPSEGS definitions.
   For simplicity, set the first start MD of every well to 0 m MD. See example Completion below.
4. **End MD**: Completion end measured depth in meter.
   Note:** Set the last end MD to be deeper than the deepest MD of the last COMPSEGS segment,
   to make sure the entire COMPSEGS interval is covered.
   If a single case file is used for all realizations in an ensemble,
   make sure the end MD is deeper than the deepest MD of all COMPSEGS definitions.
   For simplicity, set the last end MD of every well to 99999 m MD. See example Completion below.
5. **Screen/tubing diameter**: Diameter of the inner component, e.g. screens, tubing in meters.
   Mainly used to calculate volume of annulus, thus recommended to use outer tubing diameter.
   Note:** Completor®® v0.5.0 overwrites diameters defined in RMS.
6. **Well/casing diameter**: Diameter of the outer component e.g. casing, wellbore in meter.
   Note:** Completor® v0.5.0 overwrites diameters defined in RMS.
7.  **Pipe roughness**: Tubing roughness.
8. **Annulus content**: Permitted entries: OA (Open Annulus), GP (Gravel Pack), and PA (Packer).
   The packer must have zero length.
   PA needs not be defined in combination with GP.
   GP means that no flow is allowed along the annulus - just radially towards the devices.
9. **Number of valves per joint**: Any floating point number.
   Set to 0 in intervals with blanks.
10. **Valve type**: Permitted entries: PERF (standard perforation no inflow control valves),
   ICD, VALVE, AICD, DAR, AICV, or ICV.
11. **Device number**: The device reference number specified in the Completor® configuration file keywords `WSEGVALV`,
   `WSEGSICD`, `WSEGAICD`, `WSEGDAR`, `WSEGAICV`, or `WSEGICV`.
   End the record with `/`.

```
-- Creates a completion in well PROD1 branch 1 that has blank ortions from
-- 0 to 2000 m MD and 3000 to 9999 m MD. AICD with one valve per joint and an
-- open annulus is specified for the interval 2000 to 3000 m MD.
COMPLETION
  -- Well  Branch  Start  End  Screen  Well/   Roughness  Annulus  Nvalve  Valve  Device
  --       Number  mD     mD   Tubing  Casing             Content  /Joint  Type   Number
    PROD1     1       0  2000   0.1     0.2      1E-5       GP       0     AICD     1
    PROD1     1    2000  3000   0.1     0.2      1E-5       OA       1     AICD     1
    PROD1     1    3000  9999   0.1     0.2      1E-5       GP       0     AICD     1
/
```

### JOINTLENGTH (optional)

The length (in meter) of a joint.
The default value is 12 meters.
End the record with /.

```
JOINTLENGTH
-- Sets the joint length to 12 meters.
  12.0
/
```

### SEGMENTLENGTH (optional)

This keyword is optional and should be used consciously.
The SEGMENTLENGTH keyword controls how Completor® handles the tubing segment structure.
Completor® has four different options for handling the tubing segment structure.

1. If the `SEGMENTLENGTH` keyword is omitted or set to zero Completor® generates segments based on grid cell size,
   which is the Completor® default for generating well segments.
2. If the `SEGMENTLENGTH` is positive, Completor® will create segments according to the given value (in meters).
3. If the `SEGMENTLENGTH` is negative,
   Completor® will pick segment start and end MDs from the COMPLETION keyword of the case file,
   allowing for flexible (user defined) segment lengths.
   Completor® will attempt to honor the segment boundaries specified by the user when allocating grid-blocks to segments.
4. If the `SEGMENTLENGTH` keyword is set to “WELSEGS” Completor® will use the input segment structure (COMPSEGS) as basis,
   and fill in with missing WELSEGS segments.

For option 1 Completor® redefines WELSEGS segment lengths based on COMPSEGS.
For simple well structures and uniform completion designs, this has no implications.
For more complex wells with alternating open and closed well sections, this may cause coarse segment structure,
which may shift well junctions in multilateral wells.
If run time is an issue, coarser segments can reduce the simulation time,
but it comes with modest change in simulation results.
Note:
All wells modeled with Completor® will have the same segmentation method specified with the `SEGMENTLENGTH` keyword.
End the record with /.

```
SEGMENTLENGTH
-- Sets the segmentation method to be based on the cell tructure (COMPSEGS
-- start MD and end MD).
  0
/
```

### MINIMUM_SEGMENT_LENGTH (optional)

If activated, Completor® sets the minimum segment length as specified.
RMS Users:** This is equivalent to setting the MINL keyword in RMS Events.
The MINIMUM_SEGMENT_LENGTH has to be set in Completor® if the MINL option is specified in RMS.
Note:** This will set the minimum segment length for all wells modelled by Completor®.
End the record with /.

```
MINIMUM_SEGMENT_LENGTH
-- Sets the mimumum segment length to 12 meter
  12.0
/
```

### USE_STRICT (optional)

It allows for branches defined in the input schedule file that are not addressed in the case file to be automatically completed with PERF and GP.
Set USE_STRICT to FALSE for automatic completion of branches/wells.
The default value for USE_STRICT is TRUE, i.e., the completion of all branches and wells must be defined in the case file.
A complete description of well completions in the configuration file is our best practice.
End the record with /.

```
USE_STRICT
-- Wells not defined in the COMPLETION keyword automatically ets a GP PERF
-- completion.
  FALSE
/
```

### LATERAL_TO_DEVICE (optional)

The keyword takes a list of a well names and a branch numbers.
The branches listed here are routed to the device layer of the mother lateral.
All branches not listed here are automatically routed to the tubing layer of the mother lateral.
End the list of wells and branch numbers with /.

```
LATERAL_TO_DEVICE
-- Connect branch number 2 in well PROD1 to the device layer f its mother
-- branch.
  PROD1  2
/
```

### MAPFILE (optional)

It gives a file name for a text file containing two columns of well names.
On the left are well names used in the input schedule file and in the case file.
The output schedule file will have the corresponding well names of the right-hand column.
End the keyword with /.

```
MAPFILE
-- Use the columns in the following file for input and output ell names.
  '../mapfiles/rms2Completor®.wellnames'
/
```

### GP_PERF_DEVICELAYER (optional)

Completor® will by default ignore wells with gravel-pack and perforations.
However, if a device layer for these types of wells is desired, then set this keyword to TRUE.
All wells defined with GP and PERF will get an empty device layer.
End the keyword with /.

```
GP_PERF_DEVICELAYER
-- All wells in the COMPLETION keyword defined with GP PERF ill have an
-- empty device layer in the output schedule.
  TRUE
/
```

## Valve Keywords
Below are the keywords related into the column number 10 in the `COMPLETION` keyword specified above.

The valve keywords are mandatory if the valve is specified in the `COMPLETION` table.
Otherwise, Completor will fail and exit.

### WSEGAICD

Define full parameter sets for any number of AICDs.
Required only if AICD is used in the `COMPLETION` keyword.
End the record with /.
The items are as follows:

1.  Device number: From 1, 2, .., n etc.
2.  Alpha: Item 4 in WSEGAICD Eclipse keyword.
3.  x: Item 13 in WSEGAICD Eclipse keyword.
4.  y: Item 14 in WSEGAICD Eclipse keyword.
5.  a: Item 16 in WSEGAICD Eclipse keyword.
6.  b: Item 17 in WSEGAICD Eclipse keyword.
7.  c: Item 18 in WSEGAICD Eclipse keyword.
8.  d: Item 19 in WSEGAICD Eclipse keyword.
9.  e: Item 20 in WSEGAICD Eclipse keyword.
10. f: Item 21 in WSEGAICD Eclipse keyword.
11. Calibration density: Item 6 in WSEGAICD Eclipse keyword.
12. Calibration viscosity: Item 7 in WSEGAICD Eclipse keyword.

```
WSEGAICD
-- Define two AICD devices with sligthly different parameters.
-- Do not use the parameters below in planning/operations.
-- Consult the inflow control team for valid parameters.
-- DN  Alpha   x   y  a  b  c  d  e  f  den_cal  mu_cal
    1 1.0e-4 0.1 1.2  1  1  1  1  1  5     1000       1
    2 5.0e-5 0.4 3.1  1  1  1  2  1  1     1000       1
/
```

### WSEGSICD

Define full parameter sets for any number of ICDs.
Required only if ICD is used in the `COMPLETION` keyword.
End the record with /.
The items are as follows:
1.  Device number: From 1, 2, .., n etc.
2.  ICD strength: Item 4 in WSEGSICD Eclipse keyword.
3.  Calibration density: Item 6 in WSEGSICD Eclipse keyword.
4.  Calibration viscosity: Item 7 in WSEGSICD Eclipse keyword.
5.  Water fraction: Item 8 in WSEGSICD Eclipse keyword.

```
WSEGSICD
-- Define two ICD devices with sligthly different parameters.
-- Do not use the parameters below in planning/operations.
-- Consult the inflow control team for valid parameters.
-- DN  Strength  rho_cal  mu_cal  water_fraction
    1    1.0e-4   1000.0     1.0             0.5
    2    5.0e-5   1000.0     1.0             0.7
/
```

### WSEGVALV

Define full parameter sets for nozzle or ICV type completions.
Required only if VALVE is used in the `COMPLETION` keyword.
End the record with /.
The items are as follows:

1.  Device number: From 1, 2, .., n etc.
2.  Cv: Item 3 in WSEGVALV Eclipse keyword.
3.  Ac: Item 4 in WSEGVALV Eclipse keyword.
4.  L: Item 5 in WSEGVALV Eclipse keyword.

```
WSEGVALV
-- Define two VALVE devices with slightly different arameters.
-- Do not use the parameters below in planning/operations.
-- Consult the inflow control team for valid parameters.
-- DN    CV      AC  L
    1  0.01  1.0E-4  1*
/
```

### WSEGDAR

Defines full parameter sets for the Density Activated Recovery (DAR) valve.
Required only if DAR is used in the `COMPLETION` keyword.
End the record with /.
The items are as follows:

1.  Device number: From 1, 2, .., n etc.
2.  Cv: Item 3 in WSEGVALV Eclipse keyword. Always set to 1.0 with DAR.
3.  Cross-sectional flow area of the oil nozzle: Ac_o.
4.  Cross sectional flow area of the gas nozzle: Ac_g.
5.  Cross-sectional flow area of the water nozzle: Ac_w.
6.  Water volume fraction (reservoir condition) at which DAR re-opens, WVF "low cut-off": wvf_low.
7.  Water volume fraction (reservoir condition) at with DAR closes, WVF "high cut-off": wvf_high.
8.  Gas volume fraction (reservoir condition) at which DAR re-opens, GVF "low cut-off": gvf_low.
9.  Gas volume fraction (reservoir condition) at with DAR closes, GVF "high cut-off": gvf_high.

```
WSEGDAR
-- Define two DAR devices with slightly different paramters.
-- Do not use the parameters below in planning/operations.
-- Consult the inflow control team for valid parameters.
-- DN   CV  Ac_o  Ac_g  Ac_w  wvf_low  wvf_high  gvf_low  vf_high
    1  1.0  7e-4  1e-4  1e-4      0.7       0.9      0.6       0.8
    2  1.0  5e-4  1e-4  1e-4      0.6       0.8      0.7       0.9
/
```

### WSEGAICV

Defines full parameter sets for the AICV type valve.
Required only if AICV is used in the `COMPLETION` keyword.
End the record with /.
The items are as follows:

- Device number: From 1, 2, .., n etc.
- WVF: Cut-off water volume fraction, at which the flow goes to the pilot channel.
- GVF: Cut-off gas volume fraction at which the flow goes to the pilot channel.
- Rho_cal: Calibration density.
- Mu_cal: Calibration viscosity.
- (6–14) Parameters for the AICV main channel.
The same parameters as AICD e.g., alpha, x, y, a, b, c, d, e, f.
See WSEGAICD keyword.
- (15-23) Parameters for the AICV pilot channel.
The same parameters as AICD e.g., alpha, x, y, a, b, c, d, e, f.
See WSEGAICD keyword.

```
WSEGAICV
-- Defines full parameter sets for the AICV inflow control echnology.
-- Do not use the parameters below in planning/operations.
-- Consult the inflow control team for valid parameters.
-- DB  WVF  GVF  rho_cal  mu_cal  alpha1  x1  y1  a1  b1  c1  1  e1  f1 alpha2  x2  y2  a2  b2  c2  d2  e2  f2
    1  0.5  0.5   1000.0     1.0    7e-5   1   2   1   1   1   2   1   1   1e-5   2   1   1   1   1   2   2   3
    2  0.7  0.4   1000.0     1.0    8e-5   1   1   1   1   1   2   4   1   2e-5   1   1   1   1   1   2   2   2
/
```
